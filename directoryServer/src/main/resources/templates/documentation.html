<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>EDExchange Documentation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/main.css" media="screen"/>
</head>
<body>

<div class="container">
    <div class="col-sm-3">
        <div class="ed-title">API Reference</div>
        <div><a href="#introduction">Introduction</a></div>
        <div>
            <a href="swagger-ui/index.html">Interactive API documentation</a>
        </div>

        <div class="ed-title">General Topics</div>
        <div>
            <a href="#authentication">Authentication</a>
        </div>
        <div>
            <a href="#errors">Errors</a>
        </div>
        <div>
            <a href="#pagination">Pagination</a>
        </div>

        <div>
            <a href="#directory-server">Directory Server</a>
        </div>

        <div>
            <a href="#network-server">Network Server</a>
        </div>

        <div>
            <a href="#faq">Frequently Ask Questions (FAQ)</a>
        </div>

        <div class="ed-title">Core Resources</div>
        <div>
            <a href="#organizations">Organizations</a>
        </div>
        <div>
            <a href="#endpoints">Endpoints</a>
        </div>

        <div class="ed-title" id="common-service-provider-tasks">Common Service Provider Tasks</div>
        <div>
            <a href="#certificate">Provide SSL Certificate</a>
        </div>
        <div>
            <a href="#send-document">Send a Document</a>
        </div>
        <div>
            <a href="#receive-document">Receive a Document</a>
        </div>
        <div>
            <a href="#create-endpoint">Create an Endpoint</a>
        </div>
        <div>
            <a href="#create-serviceable-institution">Create Serviceable Institution</a>
        </div>
        <div>
            <a href="#upload-serviceable-institutions-csv">Upload Serviceable Institutions CSV</a>
        </div>

        <div>
            <a href="#assign-endpoint">Assign an Endpoint</a>
        </div>

        <div>
            <a href="#sign-document">Digitally Sign a Document</a>
        </div>

        <div class="ed-title" id="common-institution-tasks">Common Institution Tasks</div>
        <div>
            <a href="#certificate">Provide SSL Certificate</a>
        </div>
        <div>
            <a href="#send-document">Send a Document</a>
        </div>
        <div>
            <a href="#manage-school-codes">Manage School Codes</a>
        </div>
        <div>
            <a href="#sign-document">Digitally Sign a Document</a>
        </div>

        <div class="ed-title">Common Directory Tasks</div>
        <div>
            <a href="#manage-school-codes">Upgrade an Institution to be a Service Provider</a>
        </div>

        <div class="ed-title">Use Cases</div>
        <div>
            <a href="#transfer-document">Transfer a Document</a>
        </div>

    </div>
    <div class="col-sm-9">

        <h2 id="introduction">Introduction</h2>

        <p>
            The EDExchange API is accessible using SOAP and REST based clients. A WSDL is accessible for
            each defined resource as shown on the <a href="services">services</a> page.
            The remainder of the API documentation is specific to the REST API and is intended to
            supplement the <a href="swagger-ui/index.html">interactive API documentation</a> by providing descriptions
            of higher level tasks.
            Tasks are typically composed of different API invocations on various resourcess to accomplish a goal.
        </p>

        <p>
            The EDExchange REST API has predictable, resource-oriented URLs, and uses HTTP response codes to indicate
            API errors. We use built-in HTTP features, like HTTP authentication and HTTP verbs, which are understood
            by off-the-shelf HTTP clients. We support cross-origin resource sharing, allowing you to interact securely
            with our API from a client-side web application (though you should never expose your secret API key in any
            public website's client-side code). Depending on the value of the HTTP "Accept" header in each HTTP request,
            which must be one of "application/json" or "application/xml", JSON or XML is returned by all API responses,
            including errors.
        </p>

        <p>
            To make the API as explorable as possible, <a href="swagger-ui/index.html">interactive API documentation</a>
            has
            been provided. The interactive API documentation should be the primary source of information regarding API
            usage.
            In addition, for the purpose of testing end-to-end document delivery, endpoints can be
            designated for use in test mode or live mode. There is no "switch" for changing between modes,
            just use the appropriate endpoint to deliver a live or test document.
        </p>

        <p>
            Example code in the form of Java snippets has been provided in several areas of the documentation. Code
            examples utilize <a href="https://spring.io/">Spring</a> based technology to demonstrate how to use the
            the EDExchange REST API to accomplish various tasks.
        </p>


        <h2 id="authentication">Authentication</h2>

        <p>
            The EDExchange API uses basic authentication.
            All API requests must be made over HTTPS. Calls made over plain HTTP will fail. API requests without
            authentication will also fail.
        </p>

        <h2 id="errors">Errors</h2>

        <p>

            EDExchange uses conventional HTTP response codes to indicate the success or failure of an API request.
            In general, codes in the 2xx range indicate success, codes in the 4xx range indicate an error that failed
            given the information provided (e.g., a required parameter was omitted, etc.), and codes
            in the 5xx range indicate an error with the EDExchange servers (these are rare).
            Not all errors map cleanly onto HTTP response codes, however. When a request is valid
            but does not complete successfully, we return a 402 error code. The following describes the
            components of an error message:

        </p>

        <div class="ed-title">Error Description</div>

        <p>
        <dl class="dl-horizontal">
            <dt>timestamp</dt>
            <dd>A time stamp when the error occured, i.e. System.currentTimeMillis().</dd>

            <dt>exception</dt>
            <dd>The kind of exception that occurred. This is an optional element.</dd>
            <dt>status</dt>
            <dd>The HTTP status code (same as the response status code).</dd>
            <dt>error</dt>
            <dd>The HTTP status code description (derived from the response status code).</dd>
            <dt>path</dt>
            <dd>The path that was requested.</dd>
            <dt>message</dt>
            <dd>A message which elaborates the problem in more detail.</dd>

        </dl>
        </p>


        <div class="ed-title">HTTP Status Code Usage</div>
        <p>
            404 is not used. When a resource cannot be found, an empty list is returned.
        </p>

        <dl class="dl-horizontal">
            <dt>200 - OK</dt>
            <dd>Everything worked as expected.</dd>

            <dt>400 - Bad Request</dt>
            <dd>The request was unacceptable, often due to missing a required parameter.</dd>
            <dt>401 - Unauthorized</dt>
            <dd>No valid API key provided.</dd>
            <dt>402 - Request Failed</dt>
            <dd>The parameters were valid but the request failed.</dd>
            <dt>403 - Access Denied</dt>
            <dd>No valid API key provided or inadequate permissions.</dd>
            <dt>409 - Conflict</dt>
            <dd>The request conflicts with another request (perhaps due to using the same idempotent key).</dd>
            <dt>429 - Too Many Requests</dt>
            <dd>Too many requests hit the API too quickly.</dd>
            <dt>500, 502, 503, 504 - Server Errors</dt>
            <dd>Something went wrong on internal to the EDExchange directory server. (These are rare.)</dd>


        </dl>


        <div class="ed-title">Example Errors</div>

                <pre>
    {
        "timestamp": 1465942251599,
        "status": 403,
        "error": "Forbidden",
        "message": "Access is denied",
        "path": "/services/rest/v1/organizations/3"
    }
                </pre>

                <pre>
    {
      "timestamp": 1465992374617,
      "status": 400,
      "error": "Bad Request",
      "exception": "java.lang.IllegalArgumentException",
      "message": "At least one organization ID or school code parameter is mandatory.",
      "path": "/services/rest/v1/endpoints"
    }
                </pre>


        <h2 id="pagination">Pagination</h2>

        <p>
            Certain resources that have large results sets can be paginated. Whenever pagination is available,
            EDExchange utilizes two query parameters <var>limit</var> and <var>offset</var> to specify the maximum
            number of records that should be returned, and where in the result set to start. EDExchange utilizes
            a custom HTTP header <var>X-Total-Count</var> in the response to indicate the total number of records
            in the result set.

        <pre>https://localhost:8443/services/rest/v1/organizations?limit=5&offset=0</pre>
        </p>

        <div class="ed-title">Response Header Example</div>
        <pre>
 {
  "pragma": "no-cache",
  "strict-transport-security": "max-age=31536000 ; includeSubDomains",
  "x-content-type-options": "nosniff",
  "server": "Apache-Coyote/1.1",
  "date": "Wed, 15 Jun 2016 12:55:29 GMT",
  "x-frame-options": "DENY",
  "content-type": "application/json;charset=UTF-8",
  "x-total-count": "5150",
  "cache-control": "private, no-cache, no-store, max-age=0, must-revalidate",
  "transfer-encoding": "chunked",
  "x-xss-protection": "1; mode=block",
  "x-application-context": "application:dev:8443",
  "expires": "Wed, 31 Dec 1969 16:00:00 PST, 0"
}
        </pre>


        <h2 id="directory-server">Directory Server</h2>

        <p>
            The EDExchange directory server maintains a directory of EDExchange members and all relateded information.
            This is the
            server that hosts the API and exposes the directory information. It is hosted and maintained <a
                href="www.pesc.org">PESC</a>.
            EDExchange members can also manage their organization through the directory server web application. Most API
            operations
            can be conducted using directory server operations, including the management of users, endpoints, contacts
            and the signing
            certificate.
        </p>

        <h2 id="network-server">Network Server</h2>

        <p>
            The EDExchange network server is a server that hosts endpoints (a URL that can that receives documents). A network server must
            exist for each EDExchange member that is configured to be receive documents.

        <div id="reference-implementation">
            A reference implementation of a network server can be used as a starting point for developing an EDExchange
            network server.
            The source code for the reference implementation of the network server can be found on github using the
            following
            url:
            <pre><span th:text="${github}"></span></pre>

            <p>
            The project contains the source code for both the directory server and the reference implementation of the
            network server.  The network server is a complete solution in that it can securely send and receive documents
            over the EDExchange network.  Even so, many institutions will want to customize certain parts of the implementation.
            </p>
            <p>
                If an EDExchange member chooses to use the reference implementation of the network server, there are certain tasks
                that need to be performed to make the reference implementation live for the member.  The network server is implemented
                as a Spring Boot application and requires Java 8 to run.

                <ol>
                  <li>Obtain a domain name for the network server that it can be accessed on the internet using the domain name.</li>
                  <li>Obtain and install an SSL certificate for the purpose of handling the HTTPS protocol for the chosen domain name.</li>
                  <li>Configure a mysql database server of use with the network server.</li>
                </ol>

            </p>

        </div>

        </p>

        <h2 id="organizations">Organizations</h2>

        <p>
            An organization is an object that represents a member of the EDExchange network. An organization can be of
            type <var>Service Provider</var>
            or <var>Institution</var> or both. When an organization is created, a number is assigned to it that uniquely
            idenifies the organization in the EDExchange network.
            All members of the EDExchange network are included in the searchable EDExchange directory. Operations can be
            invoked using the <a href="/swagger-ui/index.html#!/orgnizations">organizations resource</a> of the REST API
            or
            through the directory server web application by an authenticated user with the appropriate permissions.
        </p>

        <div id="service-provider" class="ed-title">Service Providers</div>
        <p>
            An organization that is a <var>Service Provider</var> can both send and receive documents through
            EDExchange. For an
            organization to be able to receive documents, the organization must host an EDExchange <a
                href="#network-server">network server</a>.
        </p>

        <div id="institutions" class="ed-title">Institutions</div>
        <p>
            An organization that is an <var>Institution</var> can send documents through EDExchange. To send documents,
            the organization must provide a SSL certificate, obtained from a certificate authority. The certificate is
            used to verify the authenticity of a document transferred through EDExchange using digital signatures.
        </p>


        <h2 id="endpoints">Endpoints</h2>

        <p>
            An endpoint is a URL and set of attributes that identifies where to <a href="#send-document">send a
            document</a>. Organizations that are <var>Servcice Providers</var>
            can create, read, update and delete and assign endpoints to institutions that are serviceable by the
            provider.
            An institution can also be a service provider and can receive documents for itself. Endpoint operations can
            be
            invoked through the web application by an authenticated user with the appropriate permissions or by using
            the <a href="/swagger-ui/index.html#!/endpoints">endpoints resource</a> of the REST API.
        </p>


        <h2 id="certificate">SSL Certificate</h2>

        <p>
            An SSL certificate is required to send documents through the EDExchange network.
            The authenticity of documents tranferred within the EDExchange network is verified using the
            SSL certificate provided by the sender. Before an organization can send a document, it must obtain
            a certificate from a certficate authority and upload the certificate to the EDExchange directory server
            using the website or by updating the signing-certificate property on the <a
                href="/swagger-ui/index.html#!/organizations/udpateCertificateProperty">organization resource</a>
            of the REST API.

        <div class="well">
            <ol>
                <li>Obtain an SSL certificate from a certificate authority, or optionally, for test
                    purposes, <a href="#self-signed-cert">create a
                        self signed certificate.</a></li>
                <li>Upload the certificate to the directory servier using the website,
                    or by updating the signing-certificate property on the <a
                            href="/swagger-ui/index.html#!/organizations/udpateCertificateProperty">organization
                        resource</a>
                    of the REST API.
                    The certificate must be PEM encoded.
                </li>

            </ol>
        </div>
        </p>

        <div class="ed-title" id="self-signed-cert">Create a Self Signed Certificate</div>
        <p>
            A self signed SSL certificate can be created with the openssl command line utility using the following
            command:

        <p>
            <kbd>
                openssl req -x509 -newkey rsa:2048 -keyout key.pem -out certificate.pem -days 365
            </kbd>
        </p>

        <p>
            The resulting "certificate.pem" file contains the PEM encoded certificate which must be uploaded to the
            EDExchange directory server.
                      <pre>
    -----BEGIN CERTIFICATE-----
    MIIEMTCCAxmgAwIBAgIJAODgvtVzzhWlMA0GCSqGSIb3DQEBCwUAMIGuMQswCQYD
    VQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTERMA8GA1UEBwwIT3JvdmlsbGUx
    FjAUBgNVBAoMDUJ1dHRlIENvbGxlZ2UxGDAWBgNVBAsMD0NDQyBUZWNoIENlbnRl
    cjEYMBYGA1UEAwwPSmFtZXMgV2hldHN0b25lMSswKQYJKoZIhvcNAQkBFhxqd2hl
    dHN0b25lQGNjY3RlY2hjZW50ZXIub3JnMB4XDTE2MDYwMzEzMzIzM1oXDTI2MDYw
    MTEzMzIzM1owga4xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMREw
    DwYDVQQHDAhPcm92aWxsZTEWMBQGA1UECgwNQnV0dGUgQ29sbGVnZTEYMBYGA1UE
    CwwPQ0NDIFRlY2ggQ2VudGVyMRgwFgYDVQQDDA9KYW1lcyBXaGV0c3RvbmUxKzAp
    BgkqhkiG9w0BCQEWHGp3aGV0c3RvbmVAY2NjdGVjaGNlbnRlci5vcmcwggEiMA0G
    CSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDBiM6gvvogXLxRtO+uMk8nqcwnQfxX
    TSGoUMlvEs2GFocB2C67BxQ++qxf3Lpn4N/ZrutClreJ403INHph1WbkhtHIZrtn
    4yZ+kAtnQIcAYicoxAtxW9NuupD335RIIYkjkjiy11Aw6/+TfJYASEB38Vg3yaEo
    3pmpqQUt84AQ/r3NrouMeFNVDnyKGz6mCAUyRqYxL3YjLrd1EhQSX6cEksGLFYmf
    9hscrTUWaQu4u8VBJ8xx9GvRp9G0zM8/7i0Teit5YWpmKnmsNmHe3XEwyxTc+/s4
    39m+VnrIB2z+lPzvWJYuKz/apSnpoulUZ4nBRsxgKAXH6KIAUTcndc5nAgMBAAGj
    UDBOMB0GA1UdDgQWBBSkaPcNqtNTaC6AWH03rSwoZ7jaSDAfBgNVHSMEGDAWgBSk
    aPcNqtNTaC6AWH03rSwoZ7jaSDAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUA
    A4IBAQBHoW5NnQz7+d5lCihwk6iaP7xAtd/qEWJu+1yZyfqcebwqoadJgb0nC8Uz
    uAMd6EzaynxUv5xheBQRUv3fpLJEe31wmLn0Gd+PpK0m6eNK4oqVawPJzML9nNmS
    JASFKKs1g429zUdQ3oUn30S5VcsXhtE0io61kBwHJPtgapFno9XFqjSRFKDL5qzz
    QyGAhIPBEq5Jl8DNpNh2fI/1UP06Gk1Dd6mu7xh5QN/Sd8tcPHKK6uHc3hpUmt7d
    Tqg8+PzF7+OZj/t456L1zNdmRsZvE+Xu3JSCSQKCWxHT5Uaw09Mf2iipCqojd8B2
    vpU99m48pMDjePnU3qOdCQmsZ8OH
    -----END CERTIFICATE-----
                </pre>

        </p>

        <p>
            The resulting "key.pem" file contains the private key that will be used to generate
            the digital signature for any document sent through EDExchange. The private key
            should not be shared and kept in a secure location.

                  <pre>
    -----BEGIN ENCRYPTED PRIVATE KEY-----
    MIIFDjBABgkqhkiG9w0BBQ0wMzAbBgkqhkiG9w0BBQwwDgQIYtnco2loBy4CAggA
    MBQGCCqGSIb3DQMHBAg6xRCn3LZcjQSCBMgV0/6hI2RX3jEZTR5qwNOBBA5TFinL
    SYqYz9b+gbsZc7uZqFnQjDrHtYLAv9dJXvUCCB+EhtgpL7blzWxTHWFuc5QA+20j
    jRhiFglrHDtUvvXdj9o0CT8LadsrRAOSobnSM6UY3kFzMUf7MWDQbukGM36q2uHf
    xAwbJQZ7Ulm89A3abRN3MUYJo1HG2TRKqTeNhTSjAV4G6lRzomf2VhQnzp5NbqYQ
    WNKFwhwV75jdc8Ldgsn7O4y/TEsbfnHFFu/bUSzkvuJ5b/g1RYSKmrGrtbkMsatB
    nPGValF3dmMmQ9J7qL2xw9dye8TWuu2xGNYSEAacsjdVmdcZSJv0ICnu/bMmy0y+
    E11WxcK+ntW2zmNlJYEtFY86Wesirb5f+8TM0OyJus+YVoTRd0LKjNhFdF93LIxL
    X5/F1n4N8hupdBnMpqxuBo6fbStryS16Sv6n8cLzySPoEqGdZHg1d9oc7m1LHAZQ
    jRdBbCwZXpITyJnPYp7Rbfp/YgVnKt7QRCktg4X1Tor6v/ma1WAaStWOdnfk4RyR
    GtiVJ4ceomV3cXrdmZ53+9dl+K5dL90/BZAnum/hqLcw6VYeCUEWr5cvVsVXBvxd
    SSARh+y36zk2vtrWfGZm052Eb0hCKj9iR4qcIqH5ee1tuu+sBCv8VJLWbVYk5afz
    qTjwg+8Wk5SeSh3Ojh1ktAqwIdpevDnkMvILZzibVoBGV7uGxQ9TDqJt1PDUbQyb
    8eShO2FqEzoVqUxgv0So0Ellx6w7MNDxKsENmZ931+qodwk+vQlW+j/uSlE7WF8G
    hbdUOJyNQeKaYpMKrT+o69sYEvseALfCTS4/WqZGliUW3WIKMSAvr0rtyYNbYs1E
    j0nnKt0Tj8c8CGzVH+LE7p04YJmuB4bmoyTVLRgdHUIPO8UJytKxNFP1FnWTcv/Z
    EBqKOHiiabHk9ryCobi4lP2jmxJ5EuExWOyTHzPJLL4sbfmPgpKdrerIkdrLE5+d
    60f+EagggCX762etHIslc6mnIyhiQsY3pMqx4TU6KHV7pwtbfsDbHaurgZIya5JN
    CmppPju0+hVQs6frci/fJEP3dC0CGmka/jmf3hCNYa4JedTv0uwdpC6Shz/k++RJ
    1vjoIJmGuM6I23/Y8m0FLLv7ADRHskuVNUkCntkGPk8T+GTdC1mPTRqwHAMv30VT
    R9BHwWyrmzSGKL3gzUyoZ+XAllz6groi6GWMrWNejNhSx/FlUckuKNgeu+Br8X90
    btIzKVKmzrKG4386oNjY2ax0DsuZXmwwCqA7KCoz1BTFA6781RTgZgn4Wzlh8O49
    u9ewPmP+2Gv1ye1RaAyHQ38Ke85nKr0bLtdUz6KwqEt1OW5XP+gbeEE8kSpXVZ+c
    ZFdcIp2CC2tfHD+8JeR00mygvhQmbKmKAIk529TGgYK1Mb1F/PnaRDfpAWpQlr0Q
    BDaXbOP7PhvwncO1rPBhcvNNInmErMZ9oHKrjl3uA6gwSqlo2bRnghV0TKcyWyO2
    xcnjX7FQs6aiJZU/I8e/0uFPbqx0JUETsPmi4Au5UN+xNjwFyGWSMs76CkNfKanw
    0Uq1xWtaiLZsQSGavURBynbMgx3i2aXTwmGYNwOLVm0hhexzCghN2U+wT+wCQdhH
    nmY=
    -----END ENCRYPTED PRIVATE KEY-----
                </pre>
        </p>


        </p>

        <h2 id="sign-document">Sign a Document</h2>
        <p>An institution or service provider must provide an <a href="#certificate">certificate</a> obtained from a certificate authority
            to the directory server. This process requireds that a public/private key pair be generated.</p>

        <p>
            When a document such as transcript or transcript request is <a href="#transfer-document">transferred</a> to an endpoint, the digital
            signature of the document must generated using the private key and transmitted with the signed document.
        </p>


        <h2 id="send-document">Send a Document</h2>

        <p>
            Both institutions and service providers can send documents through EDExchange after <a href="#certificate">providing
            a SSL certificate.</a>
        </p>

        <div class="well">
            <div><b>Preconditions:</b> An SSL certificate has been uploaded to the directory server using the API.
                The sender's directory ID is known and a document is available to send.
            </div>

            <ol>
                <li><a href="#find-endpoint">Find an endpoint</a> for a particular recipient and document.
                </li>
                <li>Digitally <a href="#sign-document">sign the document</a>.</li>
                <li>Upload the document and digital signature, along with the required parameters to the
                    endpoint using a <a href="#upload-document">multipart/form-data HTTP POST</a>.
                </li>

            </ol>
        </div>

        <h2 id="use-cases">Use Cases</h2>


        <div id="transfer-document" class="ed-title">Transfer a Document</div>


        <ol>
            <li>
                The sender queries the directory server for the directory ID of the recipient
                institution using various search criteria such as the school's name, ATP code or FICE code.
            </li>

            <li>
                The sender queries the directory server to find an endpoint
                (a URL that identifies where to send a document using HTTP) that fulfills the required
                criteria including the document type (Transcript or Transcript Request), the file format of
                the document (PDF, text, XML, etc.), the name of the institution's department to deliver to
                and the directory ID of the recipient insitution.
            </li>

            <li>
                The sender digitally signs the document with a private key that is paired with
                the SSL certificate's public key supplied to the directory server.
            </li>

            <li>
                The sender optionally creates a transaction used to track the document transfer.
            </li>

            <li>
                The sender transfers the document to the endpoint using HTTPS along with the document's
                digital signature, the sender's directory ID, the recipient's directory ID, the file
                format, the document type and destination department name and optionally, a transaction
                id and acknowledegment URL.
            </li>

            <li>
                The receiving network server queries the directory server for the sender's
                signing certificate and verifies the digital signature of the document.
            </li>

            <li>
                The receiving network server handles the document appropriately (E.g. delivers a
                transcript to the recipient, send back a transcript in response to a transcript request) based
                on the recipient ID, the document type etc.
            </li>

            <li>
                The receiving network server creates a transaction to log the event.
            </li>

            <li>
                The receiving network server sends an acknowledgement back to the sender using
                the acknowledgement URL and transaction ID provided by the sender (if present).
            </li>


            <li>
                The sender's network server updates the transaction with the acknowledgement.
            </li>


        </ol>


        <div class="ed-title" id="upload-document">multipart/form-data HTTP POST</div>
        <p>The <a href="#reference-implementation">reference implementation</a> of the network server uses a
            multipart/form-data HTTP POST as the endpoint that
            receives documents. This section describes the HTTP POST method and provides sample code.
        </p>

        <div class="well">
            <div class="ed-heading">Parameters</div>

            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    file
                </div>
                <div class="col-sm-9">
                    The document of interest.
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    signature
                </div>
                <div class="col-sm-9">
                    The digital signature of the document of interest.
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    recipient_id
                </div>
                <div class="col-sm-9">
                    The EDExchange directory id of the recipient.
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    sender_id
                </div>
                <div class="col-sm-9">
                    The EDExchange directory id of the sender.
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    file_format
                </div>
                <div class="col-sm-9">
                    Must be one of the <a href="/services/rest/v1/document-formats" target="_blank">document format</a>
                    names as defined by EDExchange.
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    document_type
                </div>
                <div class="col-sm-9">
                    Must be one of the <a href="/services/rest/v1/document-types" target="_blank">document type</a>
                    names as defined by EDExchange.
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    department
                </div>
                <div class="col-sm-9">
                    Must be one of the <a href="/services/rest/v1/departments" target="_blank">department</a> names as
                    defined by EDExchange.
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    transaction_id (optional)
                </div>
                <div class="col-sm-9">
                    A number generated by the sender that uniquely identifies a transaction that represents the file
                    transfer.
                    Used in combination with the ack_url to acknowledge that the document has been received.
                    The sending network server uses the acknowlegement to update the transaction status.
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3" style="text-align: right;">
                    ack_url (optional)
                </div>
                <div class="col-sm-9">
                    A URL used to acknowledge that the document has been received. Used in combination
                    with the transaction_id, so that the sending network server can update the transaction
                    status with a form POST to this URL and using transction_id as a form parameter.
                </div>
            </div>

        </div>


        <div class="well">
            <div class="ed-heading">Sample Code</div>
            <p>This sample code can be used to send a document to an endpoint.</p>


        </div>

        <div class="ed-title" id="receive-document">Receive a Document</div>
        <p>
            Organizations that are service providers must host a <a href="#network-server">network server</a> in order
            to receive documents. The reference implementation of the network server uses a
            <a href="#upload-document">multipart/form-data HTTP POST</a> endpoint to receive documents.
        </p>

        <p>
            The use case below describes the steps required to receive a document.

        <div class="well">
            <div>
                <b>Preconditions:</b> A <a href="#network-server">network server</a> has been implemented
            </div>
            <ol>
                <li>
                    Receiver <a href="#create-endpoint">creates an endpoint</a> in the directory server
                    that matches the URL used to to receive in the network server.
                </li>
                <li>
                    Receiver associates the endpoint with one or more institutions.
                </li>
                <li>
                    Sender <a href="#find-endpoint">finds the endpoint</a> using the <a
                        href="/swagger-ui/index.html#!/endpoints/findEndpoint">endpoints</a> resource.
                </li>
                <li>
                    Sender signs the document to send with their private key.
                </li>
                <li>
                    Sender <a href="#send-document"> sends the document</a> to the endpoint.
                </li>

            </ol>
        </div>
        </p>


        <div class="ed-title" id="create-endpoint">Create an Endpoint</div>
        <p>
            Endpoints are URLs and related attributes that are hosted by the network server of a service provider. The
            <a href="/swagger-ui/index.html#!/endpoints">endpoints resource</a>
            can be used to manage (create, read, update and delete) endpoints for a particular service provider. The
            same operations
            are available through the directory server web application to an authenticated user with the appropriate
            permissions.
        </p>

        <div class="ed-title" id="find-endpoint">Find an Endpoint</div>
        <div class="well">

                <div><b>Preconditions:</b> The following parameters are available:
                    <p>
                    <ul class="list-unstyled" style="margin-left: 20px;">
                        <li><var>Recipient ID:</var> The directory ID of the recipient institution.</li>
                        <li><var>Document Format:</var> The <a href="/services/rest/v1/document-formats">document
                            format</a> name as defined by the directory server.
                        </li>
                        <li><var>Document Type:</var> The <a href="/services/rest/v1/document-types">document type</a>
                            name as defined by the directory server.
                        </li>
                        <li><var>Department:</var> The <a href="/services/rest/v1/departments">department</a> name as
                            defined by the directory server.
                        </li>
                        <li><var>Mode:</var> Must be either 'MODE' or 'LIVE'.</li>
                    </ul>
                    </p>

                </div>
                <ol>
                    <li> Query the <a href="/swagger-ui/index.html#!/endpoints/findEndpoint">endpoint
                        resource</a> using the REST API.</a></li>
                </ol>

        </div>

        <div class="ed-title" id="create-serviceable-institution">Create a Serviceable Institution</div>
        <div class="ed-title" id="upload-serviceable-institutions-csv">Upload Serviceable Institutions CSV</div>
        <div class="ed-title" id="assign-endpoint">Assign an Endpoint</div>
        <p>
            In order to receive documents of behalf of a serviceable institution, the service provider must associate
            one or more endpoints with the institution. This can be done using the EDExchange web application by an
            authenticated user with the appropriate permissions, or by using the organizations API resource.
        </p>


        <div class="ed-title" id="manage-school-codes">Manage School Codes</div>
        <p>
            There are a number of attributes that are used by the API that are used to search the EDExchange
            directory for institutions and <a href="#endpoints">endpoints</a>.  The attributes include different
            types of school codes.

            The following school codes are currently supported by EDExchange:

            <ul class="square-style" style="margin-left: 15px;">
              <li>FICE</li>
              <li>ATP</li>
              <li>ACT</li>
              <li>IPEDS</li>
              <li>OPEID</li>
            </ul>

            <p>
                School codes can be managed through the directory server web application by an authenticated user
                with the appropriate permissions.  School codes can also be managed using the
                <a href="/swagger-ui/index.html#!/school-codes/createSchoolCode">school codes resource</a> or alternatively
                by using the school-codes property of the <a href="/swagger-ui/index.html#!/organizations/putSchoolCode">organizations resource</a>.
            </p>

        </p>

        <div class="ed-title" id="manage-organization-contacts">Manage Contacts</div>
        <p>
            EDExchange member organizations can have one or more contacts that are presented in the
            EDExchange public directory.  Contact information is intended to provide users the abiltity to contact the organization for
            support, questions, etc.
        </p>
        <p>
            Contacts can be managed through the EDExchange directory server web application by an authenticated user
            with the appropriate permissions.  Contacts can also be managed using the <a href="/swagger-ui/index.html#!/contacts">contacts resource</a>
            of the API.
        </p>
        <div class="ed-title" id="manage-users">Manage Users</div>
        <p>
            The EDExchange directory server web application provides the ability for each organization, both service providers and institutions, to maintain a group of
            users that can manage their organization using through the web application.
        </p>
        <p>
            An organization's users can be managed through the directory server web application by an authenticated user with the appropriate permissions.  Alternatively,
            users can be managed by operating on the <a href="swagger-ui/index.html#!/users">users resource</a> of the API.
        </p>

        <h2 id="faq">Frequently Asked Questions (FAQ)</h2>

        <div class="ed-faq">
            <p>
                <b>Q: </b><span>My institution wants to send transcripts to a particular school, what do I need to do?</span>
            </p>
            <p>
                <b>A: </b>
                <span>First, <a href="home#/registration-form">register</a> with EDExchange as an institution (as opposed to a service provider).  If you also want to be able to
                        receive documents, you must register as an <a href="#institutions">institution</a> and a <a href="#service-provider">service provider</a>.  Consult the next FAQ below
                        for more information about receiving documents.</p>
                     <p>Next,
                         check if the destination school is an EDExchange member using the searchable <a href="home#/directory">directory</a>.  If the school isn't an
                         EDExchange member, they need to <a href="home#/registration-form">register</a> as a member.  Also, the destination school needs to be configured to receive documents.
                         The destination school must
                         either configure a <a href="#network-server">network server</a>, using the <a href="#reference-implementation">reference implementation</a>
                         that's provided by EDExchange, or alternatively, use an EDExchange <a href="#service-provider"> service provider</a> to receive documents on their behalf. Service providers are
                         listed in the searchable <a href="home#/directory">directory</a>.
                     <p>
                         After you've registered your institution, you'll need to obtain an <a href="#certificate">SSL certificate</a> from a certificate authority and upload it
                         to the directory server.  Once you have your certificate with the corresponding private key, you can use either the free reference implementation of the network
                         server, or the free command line utility to <a href="#send-document">send a document</a>. Optionally, you'll need a software developer to extend or implement
                         a customized software program.
                     </p>
              </span>
            </p>
        </div>


        <div class="ed-faq">
            <p>
                <b>Q: </b><span>My institution wants to receive transcripts through EDExchange, what do I need to do?</span>
            </p>
            <p>
                <b>A: </b>.
                     <span>First, you must <a href="home#/registration-form">register</a> with EDExchange as both an <a href="#institutions">institution</a> and a <a href="#service-provider">provider</a>.  As a service provider, your
                        institution will be able both send and receive documents.

                           <p>
                               After you have been registered and are a member of the EDExchange network, your are required to host a <a href="#network-server">network server</a> on the internet
                               using a domain name of your choosing (E.g. edexchange.butte.edu).
                               A free <a href="#reference-implementation">reference implementation</a> of the network server can be used. Optionally the reference implementation can be extended by a software developer to add or customize
                               features, but the reference network server has the ability to both send and receive documents. If your institution intends to send documents, you'll have to
                               provide an SSL certificate and install the corresponding private key so that is accessible to the network server.  Other configuration changes to the reference
                               implementation of the network server are required too, such as the installation of a second SSL certificate used to encrypt data communications with the network server
                               over the internet using HTTPS.
                           </p>

                            <p>
                                Once your network server has become operational, there are a number of <a href="#common-service-provider-tasks">common service provider tasks</a>
                                and <a href="#common-institution-tasks">common institition tasks</a> that define the system.
                            </p>

                    </span>
                </span>
            </p>
        </div>

        <div class="ed-faq">
            <p>
                <b>Q: </b><span>My organization is a service provider that has thousands of serviceable institutions.  How do I configure EDExchange to send and receive for all of these institutions?</span>
            </p>
            <p>
                <b>A: </b>.
                     <span>The EDExchange web application and API provides a way for service providers to create institutions and add them to a logical group that represents serviceable institutions.

                           <p>
                               The EDExchange web application allows authenticated users of the service provider to upload a CSV file where each row in the file creates an institution and adds it
                               to the provider's group of serviceable institutions.
                               Alterntively, service providers can use the <a href="/swagger-ui/index.html#!/institutions">institution</a> API resource by first <a href="swagger-ui/index.html#!/institutions/createInstitution">creating</a>
                               the institution and then adding the institution to the service provider's group of serviceable instiutions using the <a href="https://localhost:8443/swagger-ui/index.html#!/institutions/relation">relation</a>
                               API resource.
                           </p>

                            <p>
                               In order to receive documents of behalf of a serviceable institution, the service provider must <a href="#assign-endpoint">assign an endpoint</a> to the institution.
                            </p>

                    </span>
                </span>
            </p>
        </div>


        <hr>
    </div>
    <!-- Footer -->
    <footer>
        <div class="row">
            <div class="col-lg-12">
                <p>EDExchange by the Common Data Services (CDS) Task Force</p>
            </div>
        </div>
    </footer>
</div>
</body>
</html>
